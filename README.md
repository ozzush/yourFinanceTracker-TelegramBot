# yourFinanceTracker Telegram Bot

## Структура
Бот записывает информацию в базу данных MongoBD, база данных состоит из единственной коллекции в которой хранится информация по каждому пользователю. В БД у каждого пользователя 4 поля:
1. **user_id** - id в Телеграме
2. **budget** - бюджет на данный момент
3. **planned_budget** - сколько в сумме стоят запланированные покупки
4. **categories** - категории, в которые пользователь записывает свои расходы. Каждый пользователь создает собственные категории, вне категорий расходы записывать нельзя. В каждой категории два списка: купленное **items** и запланированные покупки **planned_items**. Каждая позиция в каждом списке имеет дату добавления **date**, название **item**, цену **value** и количество **count**. Новые позиции добавляются в конец.

## Функционал
Команды можно писать как с большой буквы, так и с маленькой. В словах с ё можно писать как ё, так и е.
Реализованные команды:
1. `начнем` и `забудь меня`: записаться и удалиться из базы данных.
2. `создай *имя категории*` и `-кат *имя категории*`: создать и удалить категорию. Имена категорий могут включать пробелы и цифры, например "Новый год 2022" является корректными именем.
3. `категории`: показать список категорий на inline кнопках, по кнопке можно посмотреть статистику по категории: списки **items** и **planned_items** и суммарную стоимостть каждого из списков.
4. `план *имя категории*`: показать список запланированных покупок **planned_items** в категории и их суммарную стоимость.
5. `купил` или `планирую`, затем через пробел `*имя позиции* *стоимость* *количество*`: добавить новую позицию в соответствующий список. После ввода команды будет предложено выбрать категорию по inline кнопке. Требования к именам позиций такие же, как к именам категорий, только нельзя использовать двоеточие `:`.
6. `доход *значение*`: добавить в бюджет **budget** `*значение*` рублей. Можно указать отрицательное значение, тогда бюджет уменьшится.
7. `бюджет` и `бюджет план`: показать значение бюджета **budget** и запланированного бюджета **planned_budget** соответственно

## Замечания
1. Запись новых позиций идет через inline кнопки, но параметр `callback_data` у кнопок вмещает только 64-байтные строки, поэтому слишком длинные позиции и категории проходить не будут. Сейчас в `callback_data` передается полная команда + : + название категории.

## TODO
1. Выдавать статистику по месяцам/неделям сколько в какой категории потрачено за каждый отрезок времени
2. Выдавать статистику за последний день/неделю/месяц...
3. Удалять позиции
4. Автоматически обновлять список запланированного при покупке позиции из него. Или просто возможность переносить позиции в список купленного.
